name: Hugo Spell Check

on:
  workflow_call:
    inputs:
      files:
        description: 'File patterns to check (newline-separated)'
        type: string
        default: |
          content/**/*.md
          content/**/*.html
      config:
        description: 'Path to cspell config file'
        type: string
        default: '.cspell.json'
      inline:
        description: 'Inline handling (error, warning, off)'
        type: string
        default: 'warning'
      strict:
        description: 'Strict mode - fail on any spelling issue'
        type: boolean
        default: false

concurrency:
  group: hugo-spellcheck-${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  spellcheck:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    steps:
      - uses: actions/checkout@v6

      - name: Check spelling
        uses: streetsidesoftware/cspell-action@v8
        with:
          files: ${{ inputs.files }}
          config: ${{ inputs.config }}
          inline: ${{ inputs.inline }}
          strict: ${{ inputs.strict }}
